<%- include("./partials/header.ejs") %>

    <body>
        <div class="ui container fluid custom-home-bg" id="home-container">
            <%- include("./partials/navbar.ejs") %>


                <div class="ui left demo vertical inverted sidebar labeled icon menu">
                    <a class="item">
                        <i class="icon gamepad"></i>
                        Gaming
                    </a>
                    <a class="item">
                        <i class="tv icon"></i>
                        Streaming
                    </a>

                </div>
                <div class="dashboard_image_div">
                    <img src="/public/images/khoma.png" alt="" class="ui circular image" style="max-height:250px;">
                </div>
                <div class="dashboard_name_div">
                    <br><br><br>
                    <div class="ui header">
                        <span class="custom_header_name_dashboard">Name</span>
                    </div>
                </div>


                <div class="ui equal width center alligned padded grid">
                    <div class="row">
                        <div class="four wide column">

                        </div>
                        <div class="eight wide column">


                            <table class="ui selectable inverted table" style="opacity:  0.95;">
                                <thead>
                                    <tr>
                                        <th colspan="3" style="text-align: center;">
                                            Make Payment
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="collapsing">
                                          Your current balance:
                                        </td>
                                        <td id="amount">
                                            loading...
                                        </td>
                                        <!-- <td class="right aligned collapsing"><a>Edit</a></td> -->
                                    </tr>
                                    <tr>
                                        <td class="collapsing">
                                            Enter amount:
                                        </td>
                                        <td>
                                            <form action="/pay" method="post">
                                                <input id="pay-inp" type="number" min="0" step="0.01" name="amount" required>
                                                <button class="ui button">Proceed</button>
                                            </form>
                                        </td>
                                        
                                    </tr>

                                </tbody>
                            </table>



                        </div>
                        <div class="four wide column">

                        </div>
                    </div>
                </div>

                <script>
                    let xmlhttp = new XMLHttpRequest();
                    xmlhttp.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            let myObj = JSON.parse(this.responseText);
                            document.getElementById("amount").innerHTML ="$" + myObj.data.currentAmount;
                            // console.log("ggg");
                            // console.log(myObj)
                        }
                    };
                    xmlhttp.open("GET", "http://localhost:3000/payform-info"
                        , true);
                    xmlhttp.send();
                    // fetch('http://localhost:3000/payform-info')
                    //     .then(response => response.json())
                    //     .then(json => {
                    //     // document.getElementById("content").innerHTML = JSON.stringify(json);
                    //     console.log(json)
                    // })

                    
                </script>
    </body>

    </html>
    <%- include("./partials/footer.ejs") %>